<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–î—ñ–π –¥–æ –ø–æ–¥–∞—Ä—É–Ω–∫—É üéÅ</title>
<style>
  body { margin: 0; overflow: hidden; background: #fef6e5; font-family: Arial; }
  #gameArea { position: relative; width: 100vw; height: 100vh; }
  #player { position: absolute; width: 50px; height: 50px; background: red; bottom: 10px; left: 10px; border-radius: 50%; }
  #gift { position: absolute; width: 60px; height: 60px; background: gold; top: 10px; right: 10px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
  #confetti { position: absolute; width: 100%; height: 100%; pointer-events: none; display: none; }
</style>
</head>
<body>

<div id="gameArea">
  <div id="player"></div>
  <div id="gift">üéÅ</div>
  <canvas id="confetti"></canvas>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
Telegram.WebApp.ready();

const player = document.getElementById('player');
const gift = document.getElementById('gift');
const confettiCanvas = document.getElementById('confetti');
const ctx = confettiCanvas.getContext('2d');
confettiCanvas.width = window.innerWidth;
confettiCanvas.height = window.innerHeight;

let posX = 10, posY = window.innerHeight - 60; // —Å—Ç–∞—Ä—Ç–æ–≤—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
const step = 20;

// —Ä—É—Ö —Å—Ç—Ä—ñ–ª–∫–∞–º–∏
document.addEventListener('keydown', (e) => {
    if(e.key === "ArrowUp") posY -= step;
    if(e.key === "ArrowDown") posY += step;
    if(e.key === "ArrowLeft") posX -= step;
    if(e.key === "ArrowRight") posX += step;
    
    // –º–µ–∂—ñ
    posX = Math.max(0, Math.min(posX, window.innerWidth - 50));
    posY = Math.max(0, Math.min(posY, window.innerHeight - 50));

    player.style.left = posX + 'px';
    player.style.top = posY + 'px';

    checkCollision();
});

// –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –ø–æ–¥–∞—Ä—É–Ω–∫—É
function checkCollision() {
    const playerRect = player.getBoundingClientRect();
    const giftRect = gift.getBoundingClientRect();
    
    if(!(playerRect.right < giftRect.left || 
         playerRect.left > giftRect.right || 
         playerRect.bottom < giftRect.top || 
         playerRect.top > giftRect.bottom)) {
        showConfetti();
    }
}

// –ø—Ä–æ—Å—Ç–µ –∫–æ–Ω—Ñ–µ—Ç—ñ
function showConfetti() {
    confettiCanvas.style.display = 'block';
    const pieces = [];
    for(let i=0;i<200;i++){
        pieces.push({x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, r:Math.random()*6+2, color: `hsl(${Math.random()*360},100%,50%)`, dy: Math.random()*5+2});
    }
    function animate(){
        ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
        for(let p of pieces){
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
            ctx.fill();
            p.y += p.dy;
            if(p.y>window.innerHeight) p.y=0;
        }
        requestAnimationFrame(animate);
    }
    animate();
    alert("üéâ –í—ñ—Ç–∞—î–º–æ!!"); // —Å—é—Ä–ø—Ä–∏–∑
}
</script>

</body>
</html>
