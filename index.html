<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–ë—ñ–∂—É—á–∏–π –≥–µ—Ä–æ–π</title>
<style>
body { margin:0; overflow:hidden; touch-action:none; font-family:Arial; }
#gameArea {
  position:relative;
  width:100vw;
  height:100vh;
  overflow:hidden;
  background: #a0d8f1;
}
#background1, #background2 {
  position:absolute;
  top:0;
  width:100vw;
  height:100vh;
  background: url('background.png') repeat-x;
  background-size: cover;
}
#player {
  position:absolute;
  width:80px;
  height:80px;
  left:50px;
  bottom:20px;
  z-index:5;
}
#monster {
  position:absolute;
  width:80px;
  height:80px;
  left:500px;
  bottom:20px;
  z-index:4;
  cursor:pointer;
}
#gift {
  position:absolute;
  width:100px;
  height:100px;
  left:1000px;
  bottom:20px;
  z-index:5;
}
#confetti { position:absolute; width:100%; height:100%; pointer-events:none; display:none; z-index:10; }
</style>
</head>
<body>

<div id="gameArea">
  <div id="background1"></div>
  <div id="background2"></div>
  <img id="player" src="player.png" alt="–ì–µ—Ä–æ—ó–Ω—è">
  <img id="monster" src="monster.png" alt="–ú–æ–Ω—Å—Ç—Ä">
  <img id="gift" src="gift.png" alt="–ü–æ–¥–∞—Ä—É–Ω–æ–∫">
  <canvas id="confetti"></canvas>
</div>

<script>
const player = document.getElementById('player');
const monster = document.getElementById('monster');
const gift = document.getElementById('gift');
const confettiCanvas = document.getElementById('confetti');
const ctx = confettiCanvas.getContext('2d');
confettiCanvas.width = window.innerWidth;
confettiCanvas.height = window.innerHeight;

let monsterClicks = 0;
let gamePaused = false; // –ó—É–ø–∏–Ω–∫–∞ –≥—Ä–∏

// –§–æ–Ω–æ–≤—ñ –±–ª–æ–∫–∏
const bg1 = document.getElementById('background1');
const bg2 = document.getElementById('background2');
let bgX1 = 0;
let bgX2 = window.innerWidth;
const speed = 1.5;

// –ü–æ–∑–∏—Ü—ñ—ó –º–æ–Ω—Å—Ç—Ä–∞ —ñ –ø–æ–¥–∞—Ä—É–Ω–∫–∞ –≤—ñ–¥–Ω–æ—Å–Ω–æ —Å–≤—ñ—Ç—É
let monsterX = 500;
let giftX = 1000;

function gameLoop(){
  if(gamePaused) return; // –≥—Ä–∞ –∑—É–ø–∏–Ω–µ–Ω–∞

  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –≥–µ—Ä–æ—è –∑ –º–æ–Ω—Å—Ç—Ä–æ–º
  const playerRect = player.getBoundingClientRect();
  const monsterRect = monster.getBoundingClientRect();
  const giftRect = gift.getBoundingClientRect();

  let blocked = false;
  if(monsterClicks < 3 &&
     !(playerRect.right < monsterRect.left ||
       playerRect.left > monsterRect.right ||
       playerRect.bottom < monsterRect.top ||
       playerRect.top > monsterRect.bottom)) {
         blocked = true; // –≥–µ—Ä–æ–π –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è
  }

  // –Ø–∫—â–æ –≥–µ—Ä–æ–π –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π, —Ä—É—Ö–∞—î–º–æ —Ñ–æ–Ω —ñ –æ–±‚Äô—î–∫—Ç–∏
  if(!blocked){
    // –†—É—Ö —Ñ–æ–Ω—É
    bgX1 -= speed;
    bgX2 -= speed;
    if(bgX1 <= -window.innerWidth) bgX1 = bgX2 + window.innerWidth;
    if(bgX2 <= -window.innerWidth) bgX2 = bgX1 + window.innerWidth;
    bg1.style.left = bgX1 + 'px';
    bg2.style.left = bgX2 + 'px';

    // –†—É—Ö –º–æ–Ω—Å—Ç—Ä–∞ —ñ –ø–æ–¥–∞—Ä—É–Ω–∫–∞
    monsterX -= speed;
    giftX -= speed;
  }

  // –¶–∏–∫–ª—ñ—á–Ω–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è –º–æ–Ω—Å—Ç—Ä–∞ —ñ –ø–æ–¥–∞—Ä—É–Ω–∫–∞
  if(monsterX < -80) monsterX = window.innerWidth + Math.random()*200;
  if(giftX < -100) giftX = window.innerWidth + 400 + Math.random()*200;

  monster.style.left = monsterX + 'px';
  gift.style.left = giftX + 'px';

  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –ø–æ–¥–∞—Ä—É–Ω–∫–∞
  if(!(playerRect.right < giftRect.left ||
       playerRect.left > giftRect.right ||
       playerRect.bottom < giftRect.top ||
       playerRect.top > giftRect.bottom)){
    gamePaused = true; // –∑—É–ø–∏–Ω–∫–∞ –≥—Ä–∏
    showConfetti();
    return;
  }

  requestAnimationFrame(gameLoop);
}

// –ö–ª—ñ–∫ –ø–æ –º–æ–Ω—Å—Ç—Ä—É
monster.addEventListener('click', ()=>{
  monsterClicks++;
  if(monsterClicks >= 3) monster.style.opacity = 0.5; // –ø—Ä–æ—Ö—ñ–¥–Ω–∏–π
});

// –ö–æ–Ω—Ñ–µ—Ç—ñ
function showConfetti(){
  confettiCanvas.style.display='block';
  const pieces=[];
  for(let i=0;i<200;i++){
    pieces.push({x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, r: Math.random()*6+2, color: `hsl(${Math.random()*360},100%,50%)`, dy: Math.random()*5+2});
  }
  function animate(){
    ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    for(const p of pieces){
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
      ctx.fill();
      p.y += p.dy;
      if(p.y>window.innerHeight)p.y=0;
    }
    if(!gamePaused) requestAnimationFrame(animate);
  }
  animate();
  setTimeout(()=> alert("üéâ –í—ñ—Ç–∞—î–º–æ! –ì–µ—Ä–æ—ó–Ω—è –¥—ñ–π—à–ª–∞ –¥–æ –ø–æ–¥–∞—Ä—É–Ω–∫—É!"), 100);
}

// –°—Ç–∞—Ä—Ç –≥—Ä–∏
gameLoop();
</script>

</body>
</html>
