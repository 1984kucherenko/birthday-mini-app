<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–ë—ñ–≥—É—á–∞ –≥–µ—Ä–æ—ó–Ω—è</title>
<style>
  body { margin:0; overflow:hidden; touch-action:none; font-family:Arial; }
  #gameArea {
    position:relative;
    width:100vw;
    height:100vh;
    overflow:hidden;
    background: #87ceeb; /* —Ç–∏–º—á–∞—Å–æ–≤–∏–π —Ñ–æ–Ω, –º–æ–∂–Ω–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É */
  }
  #bg1, #bg2 {
    position:absolute;
    top:0; left:0;
    width:100vw;
    height:100vh;
    background: url('background.png') repeat-x;
    background-size: cover;
  }
  #player {
    position:absolute;
    width:64px;
    height:64px;
    left:50px;
    bottom:20px;
    z-index:5;
    background: url('player_sprite.png') 0 0 no-repeat;
  }
  #monster, #gift {
    position:absolute;
    width:50px;
    height:50px;
    bottom:20px;
    z-index:4;
  }
  #monster { left:600px; cursor:pointer; }
  #gift { left:1200px; }
  #confetti { position:absolute; width:100%; height:100%; pointer-events:none; display:none; z-index:10;}
</style>
</head>
<body>

<div id="gameArea">
  <div id="bg1"></div>
  <div id="bg2"></div>
  <div id="player"></div>
  <img id="monster" src="monster.png" alt="–ú–æ–Ω—Å—Ç—Ä">
  <img id="gift" src="gift.png" alt="–ü–æ–¥–∞—Ä—É–Ω–æ–∫">
  <canvas id="confetti"></canvas>
</div>

<script>
const player = document.getElementById('player');
const monster = document.getElementById('monster');
const gift = document.getElementById('gift');
const bg1 = document.getElementById('bg1');
const bg2 = document.getElementById('bg2');
const confettiCanvas = document.getElementById('confetti');
const ctx = confettiCanvas.getContext('2d');
confettiCanvas.width = window.innerWidth;
confettiCanvas.height = window.innerHeight;

let bgX1 = 0;
let bgX2 = window.innerWidth;
let bgSpeed = 4;

let monsterX = 600;
let giftX = 1200;

let monsterClicks = 0;

// --- –°–ø—Ä–∞–π—Ç –∞–Ω—ñ–º–∞—Ü—ñ—è –≥—Ä–∞–≤—Ü—è ---
let spriteFrame = 0;
const spriteWidth = 64;
const spriteHeight = 64;
const totalFrames = 6; // –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–¥—Ä—ñ–≤ —É —Å–ø—Ä–∞–π—Ç—ñ
let spriteCounter = 0;

// --- –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª ---
function gameLoop(){
  // —Ä—É—Ö —Ñ–æ–Ω—É
  bgX1 -= bgSpeed;
  bgX2 -= bgSpeed;
  if(bgX1 <= -window.innerWidth) bgX1 = window.innerWidth;
  if(bgX2 <= -window.innerWidth) bgX2 = window.innerWidth;
  bg1.style.left = bgX1 + 'px';
  bg2.style.left = bgX2 + 'px';

  // —Ä—É—Ö –º–æ–Ω—Å—Ç—Ä–∞ —ñ –ø–æ–¥–∞—Ä—É–Ω–∫—É —Ä–∞–∑–æ–º –∑ —Ñ–æ–Ω–æ–º
  monsterX -= bgSpeed;
  giftX -= bgSpeed;
  monster.style.left = monsterX + 'px';
  gift.style.left = giftX + 'px';

  // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ –º–æ–Ω—Å—Ç—Ä–æ–º
  checkMonster();
  // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –ø–æ–¥–∞—Ä—É–Ω–∫—É
  checkGift();

  // —Å–ø—Ä–∞–π—Ç –≥—Ä–∞–≤—Ü—è
  spriteCounter++;
  if(spriteCounter % 5 === 0){ // —Ä–µ–≥—É–ª—é—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó
    spriteFrame = (spriteFrame +1) % totalFrames;
    player.style.backgroundPosition = `-${spriteFrame * spriteWidth}px 0px`;
  }

  requestAnimationFrame(gameLoop);
}

// --- –ú–æ–Ω—Å—Ç—Ä ---
function checkMonster(){
  const playerRect = player.getBoundingClientRect();
  const monsterRect = monster.getBoundingClientRect();

  if(monsterClicks < 3 &&
     !(playerRect.right < monsterRect.left || 
       playerRect.left > monsterRect.right || 
       playerRect.bottom < monsterRect.top || 
       playerRect.top > monsterRect.bottom)) {
         // –∑—É–ø–∏–Ω–∫–∞ –≥–µ—Ä–æ—è
         monsterX += bgSpeed; // –Ω–µ –¥–∞—î–º–æ –ø—Ä–æ–π—Ç–∏
  }
}

monster.addEventListener('click', ()=>{
  monsterClicks++;
  if(monsterClicks >= 3){
    monster.style.opacity = 0.5; // –º–æ–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏
  }
});

// --- –ü–æ–¥–∞—Ä—É–Ω–æ–∫ ---
function checkGift(){
  const playerRect = player.getBoundingClientRect();
  const giftRect = gift.getBoundingClientRect();
  if(!(playerRect.right < giftRect.left || 
       playerRect.left > giftRect.right || 
       playerRect.bottom < giftRect.top || 
       playerRect.top > giftRect.bottom)){
    showConfetti();
  }
}

// --- –ö–æ–Ω—Ñ–µ—Ç—ñ ---
function showConfetti(){
  confettiCanvas.style.display='block';
  const pieces=[];
  for(let i=0;i<200;i++){
    pieces.push({x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, r: Math.random()*6+2, color: `hsl(${Math.random()*360},100%,50%)`, dy: Math.random()*5+2});
  }
  function animate(){
    ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
    for(const p of pieces){
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
      ctx.fill();
      p.y += p.dy;
      if(p.y>window.innerHeight)p.y=0;
    }
    requestAnimationFrame(animate);
  }
  animate();
  alert("üéâ –í—ñ—Ç–∞—î–º–æ! –ì–µ—Ä–æ—ó–Ω—è –¥—ñ–π—à–ª–∞ –¥–æ –ø–æ–¥–∞—Ä—É–Ω–∫—É!");
}

gameLoop();
</script>

</body>
</html>
